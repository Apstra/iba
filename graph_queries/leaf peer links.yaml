name: All leaf interfaces connected to peer leafs
description: >
  Finds all leaf interfaces connected to spines, irrespective of either leaf being
  active and deployed in the blueprint
query: >
match(
  node('system', name='leaf', role='leaf', system_id=not_none()).out('hosted_interfaces')
  .node('interface', name='leaf_intf').out('link')
  .node('link').in_('link')
  .node('interface', name='peer_leaf_intf').in_('hosted_interfaces')
  .node('system', name='peer_leaf', role='leaf')
  .ensure_different('leaf_intf', 'peer_leaf_intf')
)
variants:
  - >
      Add deploy_mode check to leaf or peer to get only leafs that are actively in
      service
  - >
      Add if_type or link_type check to get only l3 peer link interfaces vs. l2
