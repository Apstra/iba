name: All leaf interfaces connected to spines
description: >
  Finds all leaf interfaces connected to spines, irrespective of leaf or spine being
  active and deployed in the blueprint
query: >
  match(
    node('system', name='leaf', role='leaf', system_id=not_none()).out('hosted_interfaces')
    .node('interface', name='leaf_intf').out('link')
    .node('link').in_('link')
    .node('interface', name='spine_intf').in_('hosted_interfaces')
    .node('system', name='spine', role='spine')
  )
variants:
  - >
      Add deploy_mode check to leaf or spine to get only leafs that are actively in
      service
  - >
      Add speed check to link node to get only links of a certain speed
